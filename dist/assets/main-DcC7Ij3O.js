import{s as _,g as h,a as b,b as L,h as S,c as E,m as w}from"./footer-B8ZrFvtH.js";const $=()=>{const a=document.querySelector(".calender__type-event"),r=document.querySelector(".calender__type-athletics"),d=document.querySelector(".calender__type-circulars"),c=document.querySelector("#calender__time-navigator"),s=document.querySelectorAll(".calender__type-content"),e=document.querySelectorAll(".calender__type");let n=0;const t=()=>{s.forEach((i,o)=>{i.style.display=o===n?"block":"none"}),e.forEach((i,o)=>{i.style.backgroundColor=o===n?"var(--color-slate-200)":"white"})},l=i=>{i=="events"?(n=0,c.disabled=!1):i=="athletics"?(n=1,c.disabled=!1):(n=2,c.disabled=!0),t()};a.addEventListener("click",()=>{l("events")}),r.addEventListener("click",()=>{l("athletics")}),d.addEventListener("click",()=>{l("circulars")}),t()},C=()=>{const a=document.querySelectorAll(".lazy"),r=new IntersectionObserver((d,c)=>{d.forEach(s=>{if(s.isIntersecting){let e=s.target;e.src=e.dataset.src,e.classList.remove("loading"),e.classList.add("loaded"),c.unobserve(e)}})});a.forEach(d=>{r.observe(d)})},D=async()=>{const a=document.querySelector(".about");return new Promise((r,d)=>{async function c(){return new Promise(async(s,e)=>{const{data:n,error:t}=await _.storage.from("home").list("about/");t&&e(t),s(n)})}c().then(s=>{for(const e of s){if(e.name==".emptyFolderPlaceholder")continue;const{data:n}=_.storage.from("home").getPublicUrl("about/"+e.name),t=document.createElement("div");t.classList.add("about__img-wrapper"),t.innerHTML=`<img class="about__img lazy loading" src="https://placehold.co/1000x1000/jpg" data-src="${n.publicUrl}" alt="Image of school" />`,a.appendChild(t);break}r()})})},T=async()=>{const a=document.querySelectorAll(".message__container");return new Promise((r,d)=>{async function c(){return new Promise(async(s,e)=>{const{data:n,error:t}=await _.storage.from("home").list("msg/");t&&e(t),s(n)})}c().then(s=>{let e=0;for(const n of s){if(n.name==".emptyFolderPlaceholder")continue;const{data:t}=_.storage.from("home").getPublicUrl("msg/"+n.name),l=document.createElement("div");if(l.classList.add("message__img-wrapper"),l.innerHTML=`<img class="message__img lazy loading" src="https://placehold.co/1000x1000/jpg" data-src="${t.publicUrl}" alt="Image of school principal" />`,a[e].appendChild(l),e++,e==2)break}r()})})},y=(a,r=new Date().toISOString().slice(0,10))=>{const d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],s=document.querySelector(`.calender__type-${a}-content`);s.replaceChildren();const e=document.createElement("div");e.classList.add(`calender__type-${a}-content`,"calender__type-content-item"),s.appendChild(e);const n=document.createElement("div");n.classList.add("calender__type-content-item-heading"),n.innerHTML=`
            <p>${v(r)}</p>
            <p>${f(r)}</p>
        `,e.appendChild(n);const t=document.createElement("div");t.classList.add("calender__type-content-item-description");const l=document.createElement("ul");l.classList.add("calender__type-content-item-list");const i=document.createElement("li");i.innerHTML=`
            <div class="calendar__type-event">Event</div>
            <div class="calendar__type-start-time">Start Time</div>
            <div class="calendar__type-end-time">End Time</div>
            <div class="calendar__type-place">Venue</div>
            <div class="calendar__type-result">Result</div>
  `,e.appendChild(t),t.appendChild(l),l.appendChild(i);async function o(){return new Promise(async(m,u)=>{let{data:p,error:g}=await _.from(`${a}-table`).select("*");g&&u(g),m(p)})}function f(m){const u=new Date(m).getDay();return d[u]}function v(m){const u=new Date(m).getDate(),p=c[new Date(m).getMonth()],g=new Date(m).getFullYear();return`${u} ${p} ${g}`}o().then(m=>{m.forEach(u=>{if(u.date==r){const p=document.createElement("li");p.innerHTML=`
            <div class="calendar__type-event">${u.event}</div>
            <div class="calendar__type-start-time">${u.start__time}</div>
            <div class="calendar__type-end-time">${u.end__time}</div>
            <div class="calendar__type-place">${u.place}</div>
            <div class="calendar__type-result">${u.result__of__event}</div>
        `,l.appendChild(p)}})})},k=()=>{const a=document.querySelector("#calender__time-navigator");a.value=new Date().toISOString().slice(0,10),a.addEventListener("change",()=>{y("events",a.value),y("athletics",a.value)})},q=async()=>{const a=document.querySelector(".calender__type-circulars-content"),r=document.createElement("div");r.classList.add("calender__type-content-item"),a.appendChild(r);const d=document.createElement("div");d.classList.add("calender__type-content-item-heading"),d.innerHTML="<p></p> <p> </p>",r.appendChild(d);const c=document.createElement("ul");return c.classList.add("calender__type-content-item-list","ciculars"),r.appendChild(c),new Promise((s,e)=>{async function n(){return new Promise(async(t,l)=>{const{data:i,error:o}=await _.from("circulars-table").select("*").order("date",{ascending:!1});o&&l(o),t(i)})}n().then(t=>{t.forEach(l=>{const i=document.createElement("li"),{data:o}=_.storage.from("circulars-pdfs").getPublicUrl(`${l.file__name}`);i.innerHTML=`
                <div class="calender__type-content-date circulars">${l.date}</div>
                <div class="calender__type-content-name circulars">
                ${l.title}
                </div>
                <div class="calender__type-content-link circulars">
                  <a href="${o.publicUrl}" target="_blank">View</a>
                </div>
            `,c.appendChild(i)}),s()})})},H=()=>{const a=document.querySelector(".featured__glance-stack");return a.replaceChildren(),new Promise((r,d)=>{async function c(){return new Promise(async(s,e)=>{let{data:n,error:t}=await _.from("meta-data").select("*");t&&e(t),s(n)})}c().then(s=>{s.forEach(e=>{const n=document.createElement("div");n.classList.add("featured__glance-item"),n.innerHTML=`
                    <p class="featured__glance-number">${e.student__number}+</p>
                    <h3 class="featured__glance-title">students</h3>
                `;const t=document.createElement("div");t.classList.add("featured__glance-item"),t.innerHTML=`
                    <p class="featured__glance-number">${e.faculty__number}+</p>
                    <h3 class="featured__glance-title">faculty members</h3>
                `;const l=document.createElement("div");l.classList.add("featured__glance-item"),l.innerHTML=`
                    <p class="featured__glance-number">${e.avg__class__size}</p>
                    <h3 class="featured__glance-title">average class size</h3>
                `;const i=document.createElement("div");i.classList.add("featured__glance-item"),i.innerHTML=`
                    <p class="featured__glance-number">${e.acre__campus}</p>
                    <h3 class="featured__glance-title">acre campus</h3>
                `;const o=document.createElement("div");o.classList.add("featured__glance-item"),o.innerHTML=`
                    <p class="featured__glance-number">${e.classroom__number}</p>
                    <h3 class="featured__glance-title">classes</h3>
                `,a.append(n,t,l,i,o),r()})})})};function I(){const a=document.querySelectorAll(".featured__glance-item"),r=document.querySelector(".featured__glance-forward-btn"),d=document.querySelector(".featured__glance-backward-btn");let c=0;const s=()=>{a.forEach((t,l)=>{t.style.display=l===c?"flex":"none"})},e=()=>{c=(c+1)%a.length,s()},n=()=>{c=(c-1+a.length)%a.length,s()};r.addEventListener("click",e),d.addEventListener("click",n),s()}async function M(){return new Promise(async(a,r)=>{const{data:d,error:c}=await _.from("meta-data").select("views");c&&r(c),a(d)})}async function P(){M().then(async a=>{const{error:r}=await _.from("meta-data").update({views:a[0].views+1}).eq("id",1);r&&console.log(r)})}const F=()=>{Promise.all([D(),T(),h(),y("events"),y("athletics"),k(),q(),H(),b(),L()]).then(()=>{I(),S(),C(),P()})};$();E();w();F();
